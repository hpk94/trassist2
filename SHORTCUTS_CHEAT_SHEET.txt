╔══════════════════════════════════════════════════════════════╗
║         APPLE SHORTCUTS - TRADING CHART UPLOADER            ║
║                    Quick Reference Card                      ║
╚══════════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────────┐
│ 1. SERVER SETUP                                              │
└──────────────────────────────────────────────────────────────┘

  Get IP Address:
  $ ifconfig | grep "inet " | grep -v 127.0.0.1
  
  Your URL:
  http://YOUR_IP:5000/api/upload-image
  
  Example:
  http://192.168.1.100:5000/api/upload-image

┌──────────────────────────────────────────────────────────────┐
│ 2. SHORTCUT ACTIONS (IN ORDER)                               │
└──────────────────────────────────────────────────────────────┘

  ① Select Photos
     └─ Select Multiple: OFF
  
  ② Get Contents of URL
     ├─ URL: http://YOUR_IP:5000/api/upload-image
     ├─ Method: POST
     └─ Request Body: Form
        ├─ image → File → [Select Photos]
        ├─ auto_analyze → Text → true
        └─ save_permanently → Text → true
  
  ③ Show Notification
     ├─ Title: "Upload Complete"
     └─ Body: [Contents of URL]

┌──────────────────────────────────────────────────────────────┐
│ 3. FORM FIELDS REFERENCE                                     │
└──────────────────────────────────────────────────────────────┘

  Required:
  • image (File) → Selected photo
  
  Optional:
  • auto_analyze (Text) → "true" or "false"
  • save_permanently (Text) → "true" or "false"
  • filename (Text) → "my_chart"

┌──────────────────────────────────────────────────────────────┐
│ 4. QUICK TEST                                                │
└──────────────────────────────────────────────────────────────┘

  From iPhone Safari:
  http://YOUR_IP:5000/api/list-uploads
  
  Should see: {"success": true, "images": [...]}

┌──────────────────────────────────────────────────────────────┐
│ 5. TROUBLESHOOTING                                           │
└──────────────────────────────────────────────────────────────┘

  ❌ Can't connect
     → Check server running: flask run
     → Check same WiFi network
  
  ❌ 404 Error
     → Use /api/upload-image (not /upload)
  
  ❌ "No image file"
     → Form field must be named "image"
     → Body type must be "Form"
  
  ❌ Timeout
     → Check firewall on Mac
     → Try ngrok for testing

┌──────────────────────────────────────────────────────────────┐
│ 6. SUCCESS RESPONSE                                          │
└──────────────────────────────────────────────────────────────┘

  {
    "success": true,
    "message": "Image uploaded and analysis started",
    "job_id": "analysis_20251031_143025",
    "metadata": {
      "filename": "trading_chart_20251031_143025.png",
      "size_kb": 239.92,
      "saved_permanently": true
    }
  }

┌──────────────────────────────────────────────────────────────┐
│ 7. USAGE OPTIONS                                             │
└──────────────────────────────────────────────────────────────┘

  From Shortcuts App:
  • Tap shortcut → Select photo → Upload
  
  From Photos App:
  • Select photo → Share → "Upload Trading Chart"
  
  From Home Screen:
  • Tap icon → Select photo → Upload
  
  With Siri:
  • "Hey Siri, Upload Trading Chart"

┌──────────────────────────────────────────────────────────────┐
│ 8. ADVANCED: ERROR HANDLING                                  │
└──────────────────────────────────────────────────────────────┘

  After "Get Contents of URL", add:
  
  ④ Get Dictionary from Input
  ⑤ Get Value for Key: "success"
  ⑥ If [Value] equals "true"
     → Show Notification: "✅ Success"
     Otherwise
     → Show Alert: "❌ Failed - check server"

┌──────────────────────────────────────────────────────────────┐
│ 9. NGROK (FOR EXTERNAL ACCESS)                               │
└──────────────────────────────────────────────────────────────┘

  $ ngrok http 5000
  
  Use URL like:
  https://abc123.ngrok-free.app/api/upload-image
  
  Works from anywhere (not just home WiFi)

┌──────────────────────────────────────────────────────────────┐
│ 10. SHARE SHEET SETUP                                        │
└──────────────────────────────────────────────────────────────┘

  In Shortcut Settings (⋯):
  ✓ Show in Share Sheet
  ✓ Share Sheet Types → Images
  ✓ Share Sheet Types → Photos

═══════════════════════════════════════════════════════════════

  📱 Need help? See APPLE_SHORTCUTS_SETUP.md
  🚀 Quick start? See SHORTCUTS_QUICK_START.md
  📊 API details? See API_DOCUMENTATION.md

═══════════════════════════════════════════════════════════════

